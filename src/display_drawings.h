#include "U8g2lib.h"

static const unsigned char image_download_bits[] U8X8_PROGMEM = {0x01,0x00,0x03,0x00,0x07,0x00,0x0d,0x00,0x1d,0x00,0x39,0x00,0x79,0x00,0xf1,0x00,0xf1,0x01,0xe1,0x03,0xf1,0x07,0x09,0x00,0x05,0x00,0x03,0x00,0x01,0x00,0x00,0x00};
static const unsigned char image_download_1_bits[] U8X8_PROGMEM = {0x00,0x70,0x00,0x50,0x00,0x50,0x00,0x50,0x00,0x57,0x00,0x57,0x00,0x57,0x00,0x57,0x70,0x57,0x70,0x57,0x70,0x57,0x70,0x57,0x77,0x57,0x77,0x57,0x77,0x77,0x00,0x00};
static const unsigned char image_download_2_bits[] U8X8_PROGMEM = {0xc0,0x01,0x20,0x02,0x90,0x04,0x48,0x09,0x48,0x09,0x88,0x08,0x10,0x04,0x20,0x02,0x20,0x02,0x58,0x0d,0x84,0x10,0x84,0x10,0x02,0x20,0x02,0x20,0x39,0x4e,0xc7,0x71};
static const unsigned char image_download_3_bits[] U8X8_PROGMEM = {0x00,0x00,0x00,0xf0,0xff,0x7f,0x08,0x00,0x80,0x68,0xdb,0xb6,0x6e,0xdb,0xb6,0x61,0xdb,0xb6,0x61,0xdb,0xb6,0x61,0xdb,0xb6,0x61,0xdb,0xb6,0x61,0xdb,0xb6,0x6e,0xdb,0xb6,0x68,0xdb,0xb6,0x08,0x00,0x80,0xf0,0xff,0x7f,0x00,0x00,0x00,0x00,0x00,0x00};

struct SensorReadoutStructure{
    uint8_t hour;
    uint8_t minute;
    uint8_t second; 
    uint8_t day;
    uint8_t month;
    uint16_t year;
    float latitude;
    float longitude;
    float altitude;
    float course;
    float speed;
    uint32_t satellites;
    int32_t hdop;
    uint16_t voltage;
};

void displayAllInfo(U8G2_SSD1306_128X64_NONAME_F_HW_I2C u8g2, SensorReadoutStructure SensorReadout){
    u8g2.clearBuffer();
    u8g2.setFontMode(1);
    u8g2.setBitmapMode(1);
    u8g2.setFont(u8g2_font_5x7_tr);

    u8g2.drawXBMP(70, 47, 11, 16, image_download_bits);
    u8g2.drawXBMP(0, 47, 15, 16, image_download_1_bits);
    u8g2.drawXBMP(0, 18, 15, 16, image_download_2_bits);
    u8g2.drawXBMP(97, 13, 24, 16, image_download_3_bits);

    u8g2.drawLine(0, 42, 128, 42);
    u8g2.drawLine(0, 10, 128, 10);
    u8g2.drawLine(90, 11, 90, 42);
    u8g2.drawLine(67, 42, 67, 63);
    u8g2.drawLine(73, 10, 73, 0);
    u8g2.drawLine(44, 10, 44, 0);

    char timeStr[9];
    char dateStr[11];
    char latitudeStr[20];
    char longitudeStr[20];
    char altitudeStr[20];
    char sateliteStr[6];
    char courseStr[12];
    char speedStr[12];
    char hdopStr[12];
    char voltageStr[5];
    snprintf(timeStr, sizeof(timeStr), "%02d:%02d:%02d", SensorReadout.hour, SensorReadout.minute, SensorReadout.second);
    snprintf(dateStr,sizeof(dateStr), "%02d/%02d/%04d;", SensorReadout.day, SensorReadout.month, SensorReadout.year);
    snprintf(latitudeStr,sizeof(latitudeStr), "Lat %.6f", SensorReadout.latitude);
    snprintf(longitudeStr,sizeof(longitudeStr), "Lng %.6f", SensorReadout.longitude);
    snprintf(altitudeStr,sizeof(altitudeStr), "Alt %.1f mnpm", SensorReadout.altitude);
    snprintf(sateliteStr,sizeof(sateliteStr), "Sat %d", SensorReadout.satellites);
    snprintf(courseStr,sizeof(courseStr), "%.2f deg", SensorReadout.course);
    snprintf(speedStr,sizeof(speedStr), "%.2f km/h", SensorReadout.speed);
    snprintf(hdopStr,sizeof(hdopStr), "HDOP %d", SensorReadout.hdop);
    snprintf(voltageStr,sizeof(voltageStr), "%d", SensorReadout.voltage);
    
    u8g2.drawStr(0, 7, timeStr);
    u8g2.drawStr(78, 7, dateStr);
    u8g2.drawStr(18, 19, latitudeStr);
    u8g2.drawStr(18, 29, longitudeStr);
    u8g2.drawStr(18, 39, altitudeStr);
    u8g2.drawStr(18, 52, sateliteStr);
    u8g2.drawStr(18, 62, hdopStr);
    u8g2.drawStr(94, 37, voltageStr);
    u8g2.drawStr(116, 37, "mV");
    u8g2.drawStr(83, 54, speedStr);
    u8g2.drawStr(84, 63, courseStr);
    u8g2.drawStr(65, 7, "s");
    u8g2.drawStr(49, 7, "200");

    u8g2.sendBuffer();
}


static const unsigned char image_Layer_3_bits[] = {0x00,0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x01,0x00,0x00,0x00,0x00,0xfc,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x01,0x00,0x00,0x00,0xc0,0x1f,0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x02,0x00,0x00,0x00,0xf0,0x1f,0x80,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x02,0x00,0x00,0x00,0xf8,0x3f,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x41,0x02,0x00,0x00,0x00,0xfc,0x07,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x60,0x40,0x41,0x04,0x00,0x00,0x00,0xfb,0x07,0x00,0x10,0x00,0x00,0x00,0x00,0x30,0x50,0x40,0x41,0x04,0x00,0x00,0x00,0xf9,0x01,0x08,0x10,0x00,0x00,0x00,0x00,0x28,0x50,0x40,0x41,0x04,0x00,0x00,0x80,0x32,0x00,0x08,0x20,0x00,0x00,0x00,0x00,0x28,0x50,0x40,0x41,0x08,0x00,0x00,0xc0,0x02,0x00,0x04,0xc0,0x40,0x00,0x00,0x01,0x28,0x50,0x40,0x41,0x08,0x00,0x00,0x20,0x04,0x00,0xc2,0x00,0xc1,0x00,0xc0,0x01,0xff,0x50,0x40,0x21,0x08,0x00,0x00,0x60,0x08,0x00,0xe1,0x3c,0x42,0x01,0x20,0x01,0xff,0xff,0x5f,0x21,0x08,0x00,0x00,0xe0,0x10,0x80,0x70,0x3c,0x42,0x0e,0x1c,0x01,0xa8,0xff,0xf5,0x3f,0x08,0x00,0x00,0xe0,0x03,0x00,0x7c,0xfc,0x42,0x08,0x04,0x01,0x28,0xf8,0xfb,0x2b,0x18,0x00,0x00,0x90,0x0f,0x00,0x3f,0xfc,0x47,0x10,0x02,0x01,0x28,0x50,0xfc,0x37,0xf8,0x7f,0x00,0x10,0x0e,0x00,0x1f,0xfc,0x47,0x20,0x01,0x01,0x28,0x50,0x40,0x3f,0x58,0x80,0x00,0x10,0x00,0x00,0x06,0xfc,0x47,0x20,0x01,0x01,0x18,0x50,0x40,0x21,0x78,0xbe,0x01,0x10,0xf0,0x7f,0x00,0xf8,0x4f,0xa0,0x00,0x01,0x00,0x50,0x40,0x21,0x68,0xbe,0x01,0x10,0xf8,0xff,0x00,0xf8,0x4f,0xa0,0x00,0x01,0x00,0x30,0x40,0x21,0x44,0x80,0x02,0x10,0xfc,0xff,0x03,0xf0,0x8f,0x40,0x80,0x00,0x00,0x00,0x40,0x11,0x44,0xc0,0x02,0x90,0xff,0xff,0x1e,0xe0,0x8f,0x01,0xc0,0x00,0x00,0x00,0x40,0x11,0x42,0xc0,0x05,0xf0,0xff,0x7f,0x7e,0x00,0x0b,0x02,0x30,0x00,0x00,0x00,0xc0,0x10,0x42,0xe0,0x05,0xf0,0x07,0x00,0xff,0x00,0x08,0x0e,0x0c,0x00,0x00,0x00,0x00,0x10,0x81,0xff,0x0b,0xe0,0x0f,0x80,0xff,0x00,0x30,0x10,0x02,0x00,0x00,0x00,0x00,0x10,0x01,0xf8,0x0b,0xe0,0xff,0xff,0xff,0x1f,0x20,0x10,0x02,0x00,0x00,0x00,0x00,0x90,0x00,0xf8,0x0b,0xe0,0xff,0xff,0xff,0x78,0x20,0x10,0x02,0x00,0x00,0x00,0x00,0x48,0x00,0xf0,0x17,0xe0,0xff,0xff,0xff,0xc0,0x21,0x08,0x02,0x00,0x00,0x00,0x00,0x28,0x00,0xf0,0x17,0xc0,0xff,0xff,0xff,0x80,0x43,0x06,0x02,0x00,0x00,0x00,0x00,0x18,0x00,0xf0,0x77,0xc0,0xff,0xff,0xff,0x00,0x87,0x02,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0xdf,0x40,0xfe,0xff,0x7f,0x00,0x0e,0x01,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x8f,0x61,0xfe,0xff,0x7f,0x00,0x18,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x0f,0x23,0xfe,0xff,0x7f,0x00,0x10,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x07,0x26,0xfe,0xff,0xff,0x00,0x30,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x07,0x3c,0xfc,0xff,0xff,0x00,0x30,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x0f,0x18,0xfc,0xff,0xff,0x03,0x30,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x0f,0x00,0xf8,0xff,0x7f,0x0e,0x18,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x00,0xf8,0xff,0xff,0x1c,0x0c,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x00,0xf0,0xff,0xff,0xf1,0x03,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x00,0xf0,0xff,0xff,0xc1,0x03,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x00,0xf0,0xff,0xff,0x03,0x00,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0xf0,0xff,0xff,0x07,0x00,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0xf0,0xff,0xff,0x0f,0x00,0x20,0x00,0x00};

void displayAlert(U8G2_SSD1306_128X64_NONAME_F_HW_I2C u8g2){
    u8g2.clearBuffer();
    u8g2.setFontMode(1);
    u8g2.setBitmapMode(1);
    u8g2.setFont(u8g2_font_5x8_tr);
    u8g2.drawStr(37, 12, "Oczekuje GPS...");
    
    u8g2.drawXBM(4, 21, 121, 43, image_Layer_3_bits);
    
    u8g2.sendBuffer();
}
